# План v0.12.1: Улучшение Timeline «Как мы работаем»

## Задача
Доработать блок «Как мы работаем»:
1. Более интересный стиль карточек (Gradient Accent Edge)
2. Шаги появляются по мере подскрола (каждый отдельно), а не все сразу
3. Зафиксировать изменения в дизайн-файлах

---

## Выбранный стиль карточек: Gradient Accent Edge

```
┌────────────────────────┐
│▌ Заголовок шага       │  ← 4px gradient border-left
│▌                       │     from-[#58A8E0] to-[#3B82F6]
│▌ Описание текст...    │
└────────────────────────┘
```

**Визуальные особенности:**
- Левая градиентная полоса 4px (`before:` pseudo-element)
- Увеличенный `shadow-md` для глубины
- Hover: `translateY(-2px)` + `shadow-lg`
- Скругление `rounded-xl` (16px)

---

## Изменение анимации: Per-Item useInView

**Текущее поведение:** один `useInView` на всю секцию → все карточки появляются вместе

**Новое поведение:** каждый `TimelineItem` имеет собственный `useInView` → появляется при входе в viewport

```tsx
function TimelineItem({ step, index, isLeft, prefersReducedMotion }) {
  const ref = useRef(null);
  const isInView = useInView(ref, { once: true, amount: 0.3 });
  // ...
}
```

**Параметры:**
- `amount: 0.3` — триггер когда 30% элемента видно
- `once: true` — анимация только один раз
- Без stagger delay (каждый элемент независим)

---

## Файлы изменены

| Файл | Действие |
|------|----------|
| `apps/web/widgets/HowWeWork/HowWeWork.tsx` | Новый стиль карточек + per-item useInView |
| `apps/web/DESIGN.md` | Обновлена секция Timeline Component |
| `roadmap/v0.12.1.plan.md` | Создан файл плана |

---

## Детали реализации

### 1. Стиль карточки (Tailwind)

```tsx
<div className="relative bg-white rounded-xl p-6
                shadow-md hover:shadow-lg hover:-translate-y-0.5
                transition-all duration-200
                before:absolute before:left-0 before:top-0 before:bottom-0
                before:w-1 before:rounded-l-xl
                before:bg-gradient-to-b before:from-[#58A8E0] before:to-[#3B82F6]">
```

### 2. Per-item анимация

```tsx
function TimelineItem({ step, index, isLeft, prefersReducedMotion }) {
  const itemRef = useRef(null);
  const isInView = useInView(itemRef, { once: true, amount: 0.3 });
  const shouldAnimate = !prefersReducedMotion;

  return (
    <motion.li
      ref={itemRef}
      initial={shouldAnimate ? { opacity: 0, x: isLeft ? -30 : 30 } : {}}
      animate={isInView ? { opacity: 1, x: 0 } : {}}
      transition={{ duration: 0.5 }}
    >
      {/* Marker и Card */}
    </motion.li>
  );
}
```

### 3. Линия таймлайна

Линия остаётся с общим `useInView` на секцию — рисуется сразу при входе секции в viewport.

---

## Спецификации анимаций (обновлённые)

| Элемент | Триггер | Анимация | Timing |
|---------|---------|----------|--------|
| Линия | Секция входит (amount: 0.1) | scaleY 0→1 | 1.2s ease-out |
| Маркер | Item входит (amount: 0.3) | scale 0→1 | spring(300, 15) |
| Карточка | Item входит (amount: 0.3) | opacity + x | 0.5s ease |

---

## Верификация

1. `pnpm dev` — открыть `/about`
2. Медленный скролл — карточки должны появляться по одной
3. Проверить gradient border на карточках
4. Hover на карточке — должна приподниматься с тенью
5. Mobile — проверить что всё работает
6. `pnpm lint` — без новых ошибок

---

## Accessibility

- `prefers-reduced-motion`: все анимации отключены
- Семантика `<ol>/<li>` сохранена
- Контраст текста без изменений (уже WCAG AA)
